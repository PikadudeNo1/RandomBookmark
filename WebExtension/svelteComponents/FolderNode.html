<li class="folderNode"
	role="treeitem" aria-expanded="{{list.length ? showSubfolders : 'undefined'}}">
	{{#if list.length}}
		<button type="button" class="expander {{showSubfolders ? 'expanded' : ''}}"
			on:click="set({showSubfolders: !showSubfolders})"></button>
	{{/if}}
	<button type="button" class="folderName" disabled="{{!enabled}}"
		on:click="store.onChosen({node, andSubfolders: searchSubfolders})">{{node.title}}</button>
	{{#if list.length && $showAndSubfolders}}
		<button type="button" class="andSubfolders" disabled="{{!hasDescendantBookmarks}}"
			on:click="store.onChosen({node, andSubfolders: true})">{{$l10nCached.andSubfolders}}</button>
	{{/if}}
	<button type="button" class="pin {{pinned ? 'pinned' : ''}}"
		aria-label="{{l10n('pin')}}" aria-pressed="{{pinned}}"
		on:click="store.onTogglePin(node.id, !pinned)"></button>
	{{#if showSubfolders}}
		<ul class="subfolders" role="group">
			<FolderNodeList list="{{list}}"/>
		</ul>
	{{/if}}
</li>
<script>
import FolderNodeList from "./FolderNodeList.html";
export default {
	setup(FolderNode) {
		FolderNode.cacheL10n = ["andSubfolders"];
	},
	data() {
		return {
			showSubfolders: false
		};
	},
	computed: {
		searchSubfolders: ($searchIn) => { return $searchIn == "folderAndSubfolders"; },
		enabled: (searchSubfolders, hasChildBookmarks, hasDescendantBookmarks) => {
			return searchSubfolders ? hasDescendantBookmarks : hasChildBookmarks;
		},
		pinned: ($pins, node) => { return $pins.has(node.id); },
	},
	components: { FolderNodeList }
};
</script>